# Image

Images designed and developed in Unity's current UI workflow are generally supported. Currently the only image 
type supported are Image components that have a fill type of ***Simple***. More will be supported on an on need 
basis.

## Conversion Pipeline
Images are converted through the `ImageConversionSystem` where the following components are attached to the 
entity generated by the conversion system:

* Material
* TextureKey
* AppliedColor
* Dimensions
* DefaultSpriteResolution
* SpriteData
* MeshVertexData Buffer
* TriangleIndexElement Buffer

These components currently give the minimum amount of data to generate Images that are ***Simple****.

### Texture Key
The texture key provides the entity with an index to allow looking up the texture in an internal texture bin. 
This bin, known as the `TextureBin` is a scriptable object that stores all unique textures currently present and 
lives in the `Assets/Resources` folder.

Moving this out of the `Assets/Resources` folder currently breaks the pipeline because, there is no scriptable 
object to load on runtime and one is not created. This ensures that there is a "singleton" of sorts that you can 
reference all textures by a key. As more images get converted that have new unique textures, more gets added to 
the `TextureBin`.

#### Pruning the TextureBin
> In short, don't do it - this is a manual operation and I currently don't have a good way of pruning things 
automatically. This is similar to GC collect and reference counting and I don't think it's a good idea to 
reinvent the wheel.

There are currently operations on the TextureBin that you can use to prune and optimize the storage, but this is 
a manual operation, so you need to provide the indices that are not in use. Lastly, as things are pruned, you 
will also need to update all existing images with the correct key.

### Building the Actual Mesh
The `MeshVertexData Buffer` and `TriangleIndexElement Buffer` contain the core data needed to build a mesh. 
Images are effectively quads and the `BuildImageVertexDataSystem` takes care of that for you, calculating the 
padding and using the canvas scale, to compute the mesh vertices needed to display.
